!function(){"use strict";$(".example").html(JSON.stringify([{name:"John",age:50},{age:"15",hobby:"swimming"},{name:"Anna",hobby:"programming"}]));var n=$('<a class="btn btn-danger delete-row-link" href="#" title="Delete row">-</a>'),t=$('<a class="btn btn-success append-row-link" href="#" title="Append row">+</a>'),e=$("#generated-table"),a=$(".load-data"),r=$(".clear-data"),i=$("#generate-json"),l=$("#input-data"),d=[];function o(){$.each(e.find("tbody tr"),function(n){$(this).find("td").first().html(n)})}a.on("click",function(){e.html("");var a=l.val();if(""==a)return alert("Empty textarea!"),!1;if(!/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return alert("Json is not valid!"),!1;d=JSON.parse(a);for(var r=[],o=0;o<d.length;o++)$.merge(r,Object.keys(d[o]));var p=$.unique(r);return function(n){e.append($("<thead />").append($("<tr />").append($("<th />").html("#"))));for(var t=e.find("thead tr"),a=0;a<n.length;a++)t.append("<th>"+n[a]+"</th>")}(p),function(a){e.append($("<tbody />"));for(var r={},i=0;i<d.length;i++){r=d[i];var l=$("<tr />");l.append($("<td />").html(i));for(var o=0;o<a.length;o++){var p=r[a[o]];null==p&&(p="");var c=$("<td />"),f=$('<input class="form-control" data-row-number="'+i+'" name="'+a[o]+'" value="'+p+'" />');l.append(c.append(f))}var u=$("<td />");u.append(n.clone(!0)).append(t.clone(!0)),l.append(u),e.find("tbody").append(l)}}(p),i.removeClass("disabled"),!1}),r.on("click",function(){return l.val(""),!1}),i.on("click",function(){var n=[],t="",a="";$.each(e.find("tbody tr"),function(){var e={};$.each($(this).find("td"),function(){var n=$(this).find("input");t=n.attr("name"),a=n.val(),null!=t&&(e[t]=a)}),n.push(e)}),l.val(JSON.stringify(n))}),n.on("click",function(){return $(this).parent("td").parent("tr").remove(),o(),!1}),t.on("click",function(){var n=$(this).parent("td").parent("tr"),t=n.clone();return t.find("input").val(""),n.after(t),o(),!1})}();