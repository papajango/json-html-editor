!function(){"use strict";function n(n){f.append($("<thead />").append($("<tr />").append($("<th />").html("#"))));for(var t=f.find("thead tr"),e=0;e<n.length;e++)t.append("<th>"+n[e]+"</th>")}function t(n){f.append($("<tbody />"));for(var t={},e=0;e<m.length;e++){t=m[e];var a=$("<tr />");a.append($("<td />").html(e));for(var r=0;r<n.length;r++){var i=t[n[r]];null==i&&(i="");var l=$("<td />"),d=$('<input class="form-control" data-row-number="'+e+'" name="'+n[r]+'" value="'+i+'" />');a.append(l.append(d))}var o=$("<td />");o.append(p.clone(!0)).append(c.clone(!0)),a.append(o),f.find("tbody").append(a)}}function e(){f.html("");var e=v.val();if(""==e)return alert("Empty textarea!"),!1;if(!/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return alert("Json is not valid!"),!1;m=JSON.parse(e);for(var a=[],r=0;r<m.length;r++)$.merge(a,Object.keys(m[r]));var i=$.unique(a);return n(i),t(i),h.removeClass("disabled"),!1}function a(){var n=[],t="",e="";$.each(f.find("tbody tr"),function(){var a={};$.each($(this).find("td"),function(){var n=$(this).find("input");t=n.attr("name"),e=n.val(),null!=t&&(a[t]=e)}),n.push(a)}),v.val(JSON.stringify(n))}function r(){return $(this).parent("td").parent("tr").remove(),l(),!1}function i(){var n=$(this).parent("td").parent("tr"),t=n.clone();return t.find("input").val(""),n.after(t),l(),!1}function l(){$.each(f.find("tbody tr"),function(n){$(this).find("td").first().html(n)})}function d(){return v.val(""),!1}var o=[{name:"John",age:50},{age:"15",hobby:"swimming"},{name:"Anna",hobby:"programming"}];$(".example").html(JSON.stringify(o));var p=$('<a class="btn btn-danger delete-row-link" href="#" title="Delete row">-</a>'),c=$('<a class="btn btn-success append-row-link" href="#" title="Append row">+</a>'),f=$("#generated-table"),u=$(".load-data"),s=$(".clear-data"),h=$("#generate-json"),v=$("#input-data"),m=[];u.on("click",e),s.on("click",d),h.on("click",a),p.on("click",r),c.on("click",i)}();